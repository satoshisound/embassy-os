<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <pwa-back-button></pwa-back-button>
    </ion-buttons>
    <ion-title>Actions</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding-top">
  <ng-container *ngIf="patch.watch$('package-data', pkgId, 'installed') | ngrxPush as installed">
    <ng-container *ngIf="installed.manifest as manifest">

      <ion-item *ngIf="manifest.actions | empty; else actions">
        <ion-label class="ion-text-wrap">
          <p>No Actions for {{ manifest.title }} {{ manifest.versionInstalled }}.</p>
        </ion-label>
      </ion-item>
  
      <ng-template #actions>
        <ion-item-group>
          <ion-item button *ngFor="let action of manifest.actions | keyvalue: asIsOrder" (click)="handleAction(installed, action)" >
            <ion-label class="ion-text-wrap">
              <h2><ion-text color="primary">{{ action.value.name }}</ion-text><ion-icon *ngIf="!(action.value['allowed-statuses'] | includes: installed.status.main.status)" color="danger" name="close-outline"></ion-icon></h2>
              <p><ion-text color="dark">{{ action.value.description }}</ion-text></p>
            </ion-label>
          </ion-item>
        </ion-item-group>
      </ng-template>
    </ng-container>
  </ng-container>
</ion-content>