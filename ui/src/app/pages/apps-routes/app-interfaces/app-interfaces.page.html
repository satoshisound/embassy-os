<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <pwa-back-button></pwa-back-button>
    </ion-buttons>
    <ion-title>Interfaces</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding-top">
  <ng-container *ngIf="patch.watch$('package-data', pkgId) | ngrxPush as pkg">

    <ion-card style="margin-bottom: 16px;" *ngFor="let interface of pkg.installed.manifest.interfaces | keyvalue: asIsOrder">
      <ion-card-header>
        <ion-card-title>
          {{ interface.value.name }}
          <ion-button class="vertical-align" *ngIf="interface.value.ui" [disabled]="!(pkg | isLaunchable)" fill="clear" (click)="launch(pkg.installed)">
            <ion-icon slot="icon-only" name="rocket-outline" size="small"></ion-icon>
          </ion-button>
        </ion-card-title>
        <ion-card-subtitle>{{ interface.value.description }}</ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <ng-container *ngIf="pkg.installed['interface-info'].addresses[interface.key] as int">
          <ion-item>
            <ion-label class="ion-text-wrap">
              <h2>Tor Address</h2>
              <p>{{ 'http://' + int['tor-address'] }}</p>
            </ion-label>
            <ion-button slot="end" fill="clear" (click)="copy('http://' + int['tor-address'])">
              <ion-icon size="small" slot="icon-only" name="copy-outline"></ion-icon>
            </ion-button>
          </ion-item>
          <ion-item>
            <ion-label class="ion-text-wrap">
              <h2>LAN Address</h2>
              <p>{{ 'https://' + int['lan-address'] }}</p>
            </ion-label>
            <ion-button slot="end" fill="clear" (click)="copy('https://' + int['lan-address'])">
              <ion-icon size="small" slot="icon-only" name="copy-outline"></ion-icon>
            </ion-button>
          </ion-item>
          <ion-item button detail="true">
            <ion-label class="ion-text-wrap">
              Advanced
            </ion-label>
          </ion-item>
        </ng-container>
      </ion-card-content>
    </ion-card>
  </ng-container>
</ion-content>